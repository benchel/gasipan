<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{./layout/basic_layout}">
<head>




</head>
<th:block layout:fragment="script">
<script type="text/javascript">
$(document).ready(function() {
	initPage();
	registEvent();
	setDefault();
});

// 페이지 초기화
const initPage = function() {

};

// 기본값 세팅
const setDefault = function() {
	/*<![CDATA[*/

    var csrf_name = /*[[${_csrf.parameterName}]]*/ '${_csrf.token}';
    var csrf_token = /*[[${_csrf.token}]]*/ '${_csrf.token}';

	/*]]>*/	
};

// 이벤트 등록
const registEvent = function() {
	$('.btn-list').on('click', function(e) {
		$(location).attr('href', 'list');
	});
	
	$('.btn-write').on('click', function(e) {
		regist();
	});
};

const regist = function() {
	let formData = $('#form').serializeArray();

	$.ajax({
		data : formData,
		url : '/freedom/write',
		type : 'post',
		dataType : 'json',
		contentType : 'application/json'
	})
	.done(function(result, status, xhr) {
		alert('저장되었습니다.');
	})
	.fail(function(xhr, status, error) {
		alert('저장 오류.');
	});
};
</script>
</th:block>
<th:block layout:fragment="content">
        <div class="conts">
            <div class="location-guide">
                <ul class="lg-ul">
                    <li>
                        <span> ▶ HOME</span>
                    </li>              
                    <li>
                        <span> ▶ 게시판</span>
                    </li>
                    <li>
                        <span> ▶ 자유게시판</span>
                    </li>
                </ul>
            </div>
            <div class="cont-body">
            	<form id="form" action="#" method="post" onsubmit="return false;">
                <div class="data-area">
                    <table class="data-tbl mg-top2">
	                    <colgroup>
	                        <col width="10%;">
	                        <col>
	                        <col width="10%;">
	                        <col>
	                    </colgroup>
	                    <tbody class="data-tbl-body">
	                        <tr>
	                            <th colspan="1" class="bgcolor-ccddbb">제목</th>
	                            <td colspan="3">
	                            	<input type="text" name="title" class="regist-input w95">
	                            </td>	                            
	                        </tr>
	                        <tr>
	                            <th colspan="4" class="bgcolor-ccddbb">내용</th>
	                        </tr>
	                        <tr>
	                            <td colspan="4">
	                            	<textarea name="content" class="regist-txtarea" rows="" cols=""></textarea>
	                            </td>
	                        </tr>
	                        <tr>
	                        	<th colspan="1" class="bgcolor-ccddbb">첨부파일</th>
	                        	<td colspan="3">
	                        		<div class="file-group">
	                        			<span class="attached-file"><a href="#">대충파일이름</a><button type="button">삭제</button></span>
	                        			<span class="attached-file"><a href="#">대충파일이름</a><button type="button">삭제</button></span>
	                        			<span class="attached-file"><a href="#">대충파일이름</a><button type="button">삭제</button></span>
	                        			<button type="button" class="btn-addfile">첨부</button>
	                        		</div>
	                        	<td>
	                        </tr>
	                        <tr>
	                            <th class="bgcolor-ccddbb" colspan="1">작성자</th>
	                            <td>테스트유저</td>
	                            <th class="bgcolor-ccddbb" colspan="1">등록일</th>
	                            <td>2022.04.22</td>
	                        </tr>
	                    </tbody>
                    </table>
                    <!-- <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/> -->
                </div>
                </form>               
            </div>
            <div class="data-btn-area mg-top2">
            	<button type="button" class="btn-write mg-rg7">등록</button>
            	<button type="button" class="btn-list mg-rg1">목록</button>
            </div>              
        </div>
</th:block>
</html>