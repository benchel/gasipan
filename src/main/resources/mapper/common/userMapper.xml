<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
      
<mapper namespace="gasipan.repository.UserDao">

	<select id="selectUserById" parameterType="gasipan.dto.UsersDto" resultType="gasipan.vo.UsersVo">
		select * from users where user_id = #{userId}
	</select>
	
	<insert id="insertUserInfor" parameterType="gasipan.dto.UsersDto">
		<selectKey order="BEFORE" keyProperty="userNum" resultType="String">
			SELECT IFNULL(max(user_num) + 1, 1) as user_num FROM users
		</selectKey>
		insert into users(
			user_num, 
			user_id, 
			user_pwd, 
			user_name, 
			user_email, 
			user_addr,
			authority,
			reg_date, 
			modify_date
		) VALUES (#{userNum},
			#{userId}, 
			#{userPwd}, 
			#{userName}, 
			#{userEmail}, 
			#{userAddr},
			"USER",
			SYSDATE(), 
			SYSDATE()
		)
	</insert>
	
</mapper>